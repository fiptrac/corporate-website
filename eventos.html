<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Eventos | FIPTRAC</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="assets/css/styles.css">


<style>
body{font-family:Montserrat,sans-serif;background:#f4f6f8;margin:0}
.eventos{max-width:1200px;margin:120px auto;padding:20px}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px}
.card{background:#fff;border-radius:16px;box-shadow:0 8px 22px rgba(0,0,0,.1);overflow:hidden}
.card img{width:100%;height:180px;object-fit:cover}
.card-body{padding:20px}
.card h3{color:#003A70}
.btn{display:inline-block;margin-top:10px;padding:10px 16px;border-radius:8px;background:#003A70;color:#fff;text-decoration:none;cursor:pointer}


/* POPUP */
.popup{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);align-items:center;justify-content:center;z-index:9999}
.popup form{background:#fff;padding:25px;border-radius:16px;max-width:500px;width:90%}
.popup input,.popup select{width:100%;padding:10px;margin:6px 0}
</style>
</head>


<body>


<section class="eventos">
<h1>Eventos y Cursos</h1>
<div class="grid" id="grid"></div>
</section>


<!-- POPUP FORM -->
<div class="popup" id="popup">
<form id="form">
<h3 id="cursoTitulo"></h3>
<input type="email" name="correo" placeholder="Correo" required>
<input type="text" name="nombre" placeholder="NOMBRE COMPLETO" required oninput="this.value=this.value.toUpperCase()">
<input type="text" name="puesto" placeholder="Puesto o cargo" required>
<input type="tel" name="celular" placeholder="Celular (10 dígitos)" pattern="[0-9]{10}" required>


<label>¿Cómo se enteró?</label>
<select name="medio" required>
<option value="Web">Búsqueda Web</option>
<option value="Correo">Correo</option>
<option value="Facebook">Facebook</option>
<option value="Instagram">Instagram</option>
<option value="LinkedIn">LinkedIn</option>
<option value="Recomendación">Recomendación</option>
<option value="Otro">Otro</option>
</select>


<label>Talla</label>
<select name="talla" required>
<option>Chica</option><option>Mediana</option><option>Grande</option><option>Extra Grande</option>
</select>


<button class="btn">Enviar inscripción</button>
</form>
</div>


<script>
const API = "https://script.google.com/macros/s/AKfycbyorWmNQ9fmsRhdETwO6aTWlsPYzSUEfZGSAJhj4_Cl4P4q3sbzG8UXLPlVroidpuXg/exec";
let cursoActual="";


fetch(API)
.then(r=>r.json())
.then(data=>{
const grid=document.getElementById('grid');
data.forEach(ev=>{
grid.innerHTML+=`
<div class="card">
<img src="assets/images/eventos/${ev.NOMBRE}.jpg">
<div class="card-body">
<h3>${ev.NOMBRE}</h3>
<p>${ev.DESCRIPCIÓN}</p>
<p><b>Fecha:</b> ${ev.FECHA}</p>
<p><b>Duración:</b> ${ev.DURACIÓN} hrs</p>
<a class="btn" href="${ev.ENLACE}" target="_blank">Ver contenido</a>
<button class="btn" onclick="inscribirse('${ev.NOMBRE}')">Inscribirse</button>
</div>
</div>`;
})
});


function inscribirse(nombre){
cursoActual=nombre;
document.getElementById('cursoTitulo').innerText=nombre;
document.getElementById('popup').style.display='flex';
}


const form=document.getElementById('form');
form.addEventListener('submit',e=>{
e.preventDefault();
const data=Object.fromEntries(new FormData(form));
data.curso=cursoActual;


fetch(API,{method:'POST',body:JSON.stringify(data)})
.then(()=>{
alert('Inscripción enviada correctamente');
form.reset();
document.getElementById('popup').style.display='none';
})
});
</script>
</body>
</html>
